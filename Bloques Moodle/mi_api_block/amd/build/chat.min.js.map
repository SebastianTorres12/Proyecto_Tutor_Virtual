{"version":3,"file":"chat.min.js","sources":["../src/chat.js"],"sourcesContent":["/* eslint-disable promise/always-return */\n/* eslint-disable promise/no-nesting */\n/* eslint-disable no-trailing-spaces */\n/* eslint-disable jsdoc/require-param */\n/* eslint-disable max-len */\n/* eslint-disable no-console */\ndefine(['jquery'], function($) {\n    // Definición de variables generales para las APIs\n    const API_tutor = 'http://localhost:8000/generar'; // API para generar respuestas del tutor\n    const API_BD_TUTOR_BASE = 'http://localhost:8080/api/'; // Base URL para la API de base de datos (se añaden endpoints específicos)\n    const API_Moodle = 'http://localhost/webservice/rest/server.php'; // API de Moodle para servicios web\n\n    return {\n        init: function(userid, courseid, role) {\n            var messagesDiv = $('#chat-messages');\n            var form = $('#chat-form');\n            var chatInput = $('#chat-input');\n            var submitButton = form.find('button[type=\"submit\"]');\n\n            // Variable para controlar si el chat está bloqueado\n            var isChatBlocked = false;\n\n            /**\n             * Registra al usuario en la API al cargar el bloque, solo si no ha sido registrado previamente\n             */\n            function registrarUsuario() {\n                // Verificar si el usuario ya está registrado en la base de datos\n                messagesDiv.append('<p><strong>Debug:</strong> Verificando si el usuario ya está registrado...</p>');\n                messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                $.ajax({\n                    url: `${API_BD_TUTOR_BASE}users/${userid}`, // Usar variable para endpoint GET de usuarios\n                    method: 'GET',\n                    dataType: 'json',\n                    success: function(response) {\n                        console.log('Usuario encontrado en la API:', response);\n                        messagesDiv.append('<p><strong>Debug:</strong> Usuario ya registrado en la API: ' + response.username + '</p>');\n                        messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                        // Marcar al usuario como registrado en localStorage\n                        var userRegisteredKey = 'user_registered_' + userid;\n                        localStorage.setItem(userRegisteredKey, 'true');\n                    },\n                    error: function(xhr, status, error) {\n                        // Si el usuario no existe (404), procedemos a registrarlo\n                        if (xhr.status === 404) {\n                            messagesDiv.append('<p><strong>Debug:</strong> Usuario no encontrado. Procediendo a registrar...</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                            // Construir la URL para gradereport_user_get_grade_items usando API_Moodle\n                            var params = {\n                                wstoken: '10b97b49ec5c5119e48c566de5228f8f',\n                                wsfunction: 'gradereport_user_get_grade_items',\n                                moodlewsrestformat: 'json',\n                                courseid: courseid,\n                                userid: userid\n                            };\n\n                            var queryString = $.param(params);\n                            var fullUrl = `${API_Moodle}?${queryString}`;\n\n                            console.log('URL generada para gradereport_user_get_grade_items (registro):', fullUrl);\n\n                            messagesDiv.append('<p><strong>Debug:</strong> Obteniendo nombre completo del usuario...</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                            $.ajax({\n                                url: fullUrl,\n                                method: 'GET',\n                                dataType: 'json',\n                                success: function(data) {\n                                    console.log('Respuesta de gradereport_user_get_grade_items (registro):', data);\n\n                                    var userfullname = 'Usuario Desconocido'; // Valor por defecto\n                                    if (data.usergrades && data.usergrades.length > 0) {\n                                        userfullname = data.usergrades[0].userfullname || userfullname;\n                                    }\n\n                                    messagesDiv.append('<p><strong>Debug:</strong> Nombre completo del usuario: ' + userfullname + '</p>');\n                                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                                    messagesDiv.append('<p><strong>Debug:</strong> Rol del usuario: ' + role + '</p>');\n                                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                                    // Registrar al usuario en la API, incluyendo el userfullname\n                                    $.ajax({\n                                        url: `${API_BD_TUTOR_BASE}users/register`, // Usar variable para endpoint POST de registro\n                                        method: 'POST',\n                                        data: JSON.stringify({\n                                            user_id: userid,\n                                            username: 'user_' + userid,\n                                            role: role,\n                                            userfullname: userfullname\n                                        }),\n                                        contentType: 'application/json',\n                                        success: function(response) {\n                                            console.log('Usuario registrado en la API:', response);\n                                            messagesDiv.append('<p><strong>Debug:</strong> Usuario registrado en la API.</p>');\n                                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                                            // Marcar al usuario como registrado en localStorage\n                                            var userRegisteredKey = 'user_registered_' + userid;\n                                            localStorage.setItem(userRegisteredKey, 'true');\n                                        },\n                                        error: function(xhr, status, error) {\n                                            console.log('Error al registrar usuario:', { xhr, status, error });\n                                            messagesDiv.append('<p><strong>Debug:</strong> Error al registrar usuario: ' + error + '</p>');\n                                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                        }\n                                    });\n                                },\n                                error: function(xhr, status, error) {\n                                    console.log('Error al obtener nombre completo del usuario:', { xhr, status, error });\n                                    messagesDiv.append('<p><strong>Debug:</strong> Error al obtener nombre completo del usuario: ' + error + '</p>');\n                                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                                    // Registrar al usuario con un userfullname por defecto en caso de error\n                                    $.ajax({\n                                        url: `${API_BD_TUTOR_BASE}users/register`, // Usar variable para endpoint POST de registro\n                                        method: 'POST',\n                                        data: JSON.stringify({\n                                            user_id: userid,\n                                            username: 'user_' + userid,\n                                            role: role,\n                                            userfullname: 'Usuario Desconocido'\n                                        }),\n                                        contentType: 'application/json',\n                                        success: function(response) {\n                                            console.log('Usuario registrado en la API (userfullname por defecto):', response);\n                                            messagesDiv.append('<p><strong>Debug:</strong> Usuario registrado en la API (userfullname por defecto).</p>');\n                                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                                            // Marcar al usuario como registrado en localStorage\n                                            var userRegisteredKey = 'user_registered_' + userid;\n                                            localStorage.setItem(userRegisteredKey, 'true');\n                                        },\n                                        error: function(xhr, status, error) {\n                                            console.log('Error al registrar usuario (userfullname por defecto):', { xhr, status, error });\n                                            messagesDiv.append('<p><strong>Debug:</strong> Error al registrar usuario (userfullname por defecto): ' + error + '</p>');\n                                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                        }\n                                    });\n                                }\n                            });\n                        } else {\n                            // Otros errores al consultar el usuario\n                            console.log('Error al verificar usuario:', { xhr, status, error });\n                            messagesDiv.append('<p><strong>Debug:</strong> Error al verificar usuario: ' + error + '</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                        }\n                    }\n                });\n            }\n\n            /**\n             * Verifica si hay un intento de cuestionario en curso y bloquea el chat si es necesario.\n             * Si no hay intentos en curso, permite ejecutar un callback (como obtenerRecomendaciones).\n             */\n            function verificarIntentosCuestionario(callback) {\n                // Construir la URL para gradereport_user_get_grade_items usando API_Moodle\n                var params = {\n                    wstoken: '10b97b49ec5c5119e48c566de5228f8f',\n                    wsfunction: 'gradereport_user_get_grade_items',\n                    moodlewsrestformat: 'json',\n                    courseid: courseid,\n                    userid: userid\n                };\n\n                var queryString = $.param(params);\n                var fullUrl = `${API_Moodle}?${queryString}`;\n\n                console.log('URL generada para gradereport_user_get_grade_items:', fullUrl);\n\n                messagesDiv.append('<p><strong>Debug:</strong> Verificando intentos de cuestionarios...</p>');\n                messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                // Obtener las actividades del curso\n                $.ajax({\n                    url: fullUrl,\n                    method: 'GET',\n                    dataType: 'json',\n                    success: function(data) {\n                        console.log('Respuesta de gradereport_user_get_grade_items:', data);\n\n                        var actividades = [];\n                        if (data.usergrades) {\n                            data.usergrades.forEach(user => {\n                                user.gradeitems.forEach(item => {\n                                    // Solo incluir actividades (excluir itemname null, que es el total del curso)\n                                    if (item.itemname && item.cmid) {\n                                        actividades.push({\n                                            cmid: item.cmid,\n                                            name: item.itemname\n                                        });\n                                    }\n                                });\n                            });\n                        }\n\n                        if (actividades.length === 0) {\n                            messagesDiv.append('<p><strong>Debug:</strong> No se encontraron actividades para verificar.</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                            // Ejecutar el callback si existe\n                            if (callback) {callback();}\n                            return;\n                        }\n\n                        // Filtrar las actividades que son cuestionarios\n                        var quizzes = [];\n                        var promises = actividades.map(actividad => {\n                            var paramsContext = {\n                                wstoken: '10b97b49ec5c5119e48c566de5228f8f',\n                                wsfunction: 'core_course_get_course_module',\n                                moodlewsrestformat: 'json',\n                                cmid: actividad.cmid\n                            };\n\n                            var queryStringContext = $.param(paramsContext);\n                            var fullUrlContext = `${API_Moodle}?${queryStringContext}`;\n\n                            return $.ajax({\n                                url: fullUrlContext,\n                                method: 'GET',\n                                dataType: 'json',\n                                success: function(contextData) {\n                                    if (contextData.cm && contextData.cm.modname === 'quiz') {\n                                        quizzes.push({\n                                            quizid: contextData.cm.instance,\n                                            name: actividad.name\n                                        });\n                                    }\n                                },\n                                error: function(xhr, status, error) {\n                                    console.log('Error al obtener datos del módulo:', { xhr, status, error });\n                                }\n                            });\n                        });\n\n                        // Esperar a que todas las solicitudes de core_course_get_course_module se completen\n                        Promise.all(promises).then(() => {\n                            console.log('Cuestionarios encontrados:', quizzes);\n\n                            if (quizzes.length === 0) {\n                                messagesDiv.append('<p><strong>Debug:</strong> No se encontraron cuestionarios para verificar.</p>');\n                                messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                // Ejecutar el callback si existe\n                                if (callback) {callback();}\n                                return;\n                            }\n\n                            // Verificar intentos en curso para cada cuestionario\n                            var attemptPromises = quizzes.map(quiz => {\n                                var paramsAttempts = {\n                                    wstoken: '10b97b49ec5c5119e48c566de5228f8f',\n                                    wsfunction: 'mod_quiz_get_user_attempts',\n                                    moodlewsrestformat: 'json',\n                                    quizid: quiz.quizid,\n                                    userid: userid,\n                                    status: 'all',\n                                    includepreviews: 0\n                                };\n\n                                var queryStringAttempts = $.param(paramsAttempts);\n                                var fullUrlAttempts = `${API_Moodle}?${queryStringAttempts}`;\n\n                                console.log('URL generada para mod_quiz_get_user_attempts:', fullUrlAttempts);\n\n                                return $.ajax({\n                                    url: fullUrlAttempts,\n                                    method: 'GET',\n                                    dataType: 'json',\n                                    success: function(attemptData) {\n                                        console.log(`Respuesta de mod_quiz_get_user_attempts para quiz ${quiz.quizid}:`, attemptData);\n\n                                        if (attemptData.attempts && attemptData.attempts.length > 0) {\n                                            var inProgressAttempt = attemptData.attempts.find(attempt => attempt.state === 'inprogress');\n                                            if (inProgressAttempt) {\n                                                isChatBlocked = true;\n                                                messagesDiv.append('<p><strong>Tutor:</strong> No puedes enviar mensajes mientras estás realizando un cuestionario en curso.</p>');\n                                                messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                                // Deshabilitar el formulario\n                                                chatInput.prop('disabled', true);\n                                                submitButton.prop('disabled', true);\n                                            }\n                                        }\n                                    },\n                                    error: function(xhr, status, error) {\n                                        console.log('Error al obtener intentos del cuestionario:', { xhr, status, error });\n                                    }\n                                });\n                            });\n\n                            // Esperar a que todas las solicitudes de mod_quiz_get_user_attempts se completen\n                            Promise.all(attemptPromises).then(() => {\n                                if (!isChatBlocked) {\n                                    messagesDiv.append('<p><strong>Debug:</strong> No se encontraron intentos de cuestionarios en curso.</p>');\n                                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                    // Ejecutar el callback si existe\n                                    if (callback) {callback();}\n                                }\n                            }).catch(error => {\n                                console.log('Error al verificar intentos:', error);\n                                messagesDiv.append('<p><strong>Tutor:</strong> Error al verificar intentos de cuestionarios: ' + error + '</p>');\n                                messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                // Ejecutar el callback por seguridad\n                                if (callback) {callback();}\n                            });\n                        }).catch(error => {\n                            console.log('Error al obtener módulos del curso:', error);\n                            messagesDiv.append('<p><strong>Tutor:</strong> Error al verificar actividades: ' + error + '</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                            // Ejecutar el callback por seguridad\n                            if (callback) {callback();}\n                        });\n                    },\n                    error: function(xhr, status, error) {\n                        console.log('Error al obtener actividades:', { xhr, status, error });\n                        messagesDiv.append('<p><strong>Tutor:</strong> Error al obtener actividades: ' + error + ' (Código: ' + xhr.status + ')</p>');\n                        messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                        // Ejecutar el callback por seguridad\n                        if (callback) {callback();}\n                    }\n                });\n            }\n\n            /**\n             * Obtiene las calificaciones del usuario actual, genera recomendaciones y las muestra.\n             * Usa gradereport_user_get_grade_items para obtener las calificaciones y las envía a la API\n             * para generar recomendaciones personalizadas.\n             */\n            function obtenerRecomendaciones() {\n                // Obtener el ID de la actividad desde la URL\n                var urlParams = new URLSearchParams(window.location.search);\n                var activityId = urlParams.get('id') || 1;\n                console.log('Valor de activityId:', activityId); // Depuración\n\n                // Usar el userid y courseid pasados desde PHP\n                var currentUserId = userid;\n                var currentCourseId = courseid;\n\n                // Construir la URL completa para la solicitud GET usando API_Moodle\n                var params = {\n                    wstoken: '10b97b49ec5c5119e48c566de5228f8f',\n                    wsfunction: 'gradereport_user_get_grade_items',\n                    moodlewsrestformat: 'json',\n                    courseid: currentCourseId,\n                    userid: currentUserId\n                };\n\n                var queryString = $.param(params);\n                var fullUrl = `${API_Moodle}?${queryString}`;\n\n                console.log('URL generada para gradereport_user_get_grade_items:', fullUrl);\n\n                messagesDiv.append('<p><strong>Debug:</strong> Obteniendo calificaciones...</p>');\n                messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                // Obtener calificaciones\n                $.ajax({\n                    url: fullUrl,\n                    method: 'GET',\n                    dataType: 'json',\n                    success: function(data) {\n                        console.log('Respuesta de gradereport_user_get_grade_items:', data);\n\n                        var notas = [];\n                        if (data.usergrades) {\n                            data.usergrades.forEach(user => {\n                                user.gradeitems.forEach(item => {\n                                    if (item.itemname) {\n                                        var grade = item.graderaw !== null ? item.graderaw : 0;\n                                        if (grade > 0) {\n                                            notas.push({\n                                                userid: user.userid,\n                                                name: user.userfullname,\n                                                grade: grade,\n                                                actividad: item.itemname\n                                            });\n                                        }\n                                    }\n                                });\n                            });\n                        } else {\n                            console.log('No se encontraron usergrades en la respuesta:', data);\n                            messagesDiv.append('<p><strong>Tutor:</strong> No se encontraron calificaciones.</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                            return;\n                        }\n\n                        console.log('Notas procesadas (después de filtrar notas > 0):', notas);\n\n                        if (notas.length === 0) {\n                            messagesDiv.append('<p><strong>Tutor:</strong> No hay actividades con notas mayores a 0 para analizar.</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                            return;\n                        }\n\n                        var instruccionNotas = \"Actúa como un tutor virtual especializado en la enseñanza de Análisis y Diseño de Software. Tu tarea es analizar las calificaciones de un estudiante y generar recomendaciones personalizadas para mejorar su rendimiento en cada actividad. Recibirás una lista de calificaciones en el formato: [{\\\"userid\\\": number, \\\"name\\\": string, \\\"grade\\\": number, \\\"actividad\\\": string}, ...]. Para cada actividad, evalúa la nota (que está en una escala de 0 a 10) y genera una recomendación específica basada en el rendimiento del estudiante. Si la nota es menor a 5, sugiere acciones para mejorar (por ejemplo, revisar conceptos específicos, practicar más ejercicios, o buscar ayuda adicional). Si la nota está entre 5 y 7, sugiere formas de consolidar el aprendizaje (por ejemplo, profundizar en temas específicos o aplicar conceptos en proyectos prácticos). Si la nota es mayor a 7, felicita al estudiante y sugiere cómo puede seguir avanzando (por ejemplo, explorar temas más avanzados o liderar proyectos). Devuelve las recomendaciones en formato JSON con la siguiente estructura: {\\\"recomendaciones\\\": [{\\\"userid\\\": number, \\\"name\\\": string, \\\"nota\\\": number, \\\"actividad\\\": string, \\\"recomendacion\\\": string}, ...]}. Responde en español.\";\n\n                        messagesDiv.append('<p><strong>Debug:</strong> Enviando calificaciones a la API...</p>');\n                        messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                        $.ajax({\n                            url: API_tutor, // Usar variable para endpoint de generación\n                            method: 'POST',\n                            data: JSON.stringify({\n                                instruccion: instruccionNotas,\n                                entrada: JSON.stringify(notas),\n                                max_nuevos_tokens: 5000\n                            }),\n                            contentType: 'application/json',\n                            success: function(response) {\n                                console.log('Respuesta de la API /generar:', response);\n\n                                if (response.respuesta) {\n                                    var cleanedResponse = response.respuesta\n                                        .replace(/```json\\n/, '')\n                                        .replace(/\\n```/, '')\n                                        .trim();\n\n                                    console.log('Respuesta limpia:', cleanedResponse);\n\n                                    try {\n                                        var recomendaciones = JSON.parse(cleanedResponse);\n                                        console.log('Recomendaciones parseadas:', recomendaciones);\n\n                                        if (recomendaciones.recomendaciones && recomendaciones.recomendaciones.length > 0) {\n                                            var studentName = recomendaciones.recomendaciones[0].name;\n                                            var mensaje = `Hola ${studentName}, he analizado tus calificaciones. Aquí tienes algunas recomendaciones para mejorar:<br>`;\n                                            recomendaciones.recomendaciones.forEach(rec => {\n                                                mensaje += `- En ${rec.actividad}, obtuviste ${rec.nota}: ${rec.recomendacion}<br>`;\n                                            });\n\n                                            messagesDiv.append(`<p><strong>Tutor:</strong> ${mensaje}</p>`);\n                                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                        } else {\n                                            messagesDiv.append('<p><strong>Tutor:</strong> Error: No se encontraron recomendaciones en la respuesta.</p>');\n                                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                        }\n                                    } catch (parseError) {\n                                        console.log('Error al parsear la respuesta:', parseError);\n                                        messagesDiv.append('<p><strong>Tutor:</strong> Error al parsear las recomendaciones: ' + parseError.message + '</p>');\n                                        messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                    }\n                                } else {\n                                    messagesDiv.append('<p><strong>Tutor:</strong> Error: Respuesta inválida de la API.</p>');\n                                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                }\n                            },\n                            error: function(xhr, status, error) {\n                                console.log('Error al obtener recomendaciones:', { xhr, status, error });\n                                messagesDiv.append('<p><strong>Tutor:</strong> Error al obtener recomendaciones: ' + error + '</p>');\n                                messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                            }\n                        });\n                    },\n                    error: function(xhr, status, error) {\n                        console.log('Error al obtener calificaciones:', { xhr, status, error });\n                        console.log('Código de estado HTTP:', xhr.status);\n                        console.log('Respuesta del servidor:', xhr.responseText);\n                        messagesDiv.append('<p><strong>Tutor:</strong> Error al obtener calificaciones: ' + error + ' (Código: ' + xhr.status + ')</p>');\n                        messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                    }\n                });\n            }\n\n            // Registrar usuario al cargar el bloque\n            registrarUsuario();\n\n            // Verificar intentos de cuestionarios en curso al cargar el bloque\n            verificarIntentosCuestionario();\n\n            // Configurar el botón de escaneo\n            var btnIniciarEscaneo = $('#btn-iniciar-escaneo');\n            if (btnIniciarEscaneo.length) {\n                btnIniciarEscaneo.on('click', function() {\n                    messagesDiv.append('<p><strong>Debug:</strong> Iniciando escaneo del curso...</p>');\n                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                    // Ejecutar verificarIntentosCuestionario y pasar obtenerRecomendaciones como callback\n                    verificarIntentosCuestionario(obtenerRecomendaciones);\n                });\n            } else {\n                console.log('Botón de escaneo no encontrado');\n                messagesDiv.append('<p><strong>Error:</strong> Botón de escaneo no encontrado</p>');\n                messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n            }\n\n            if (form.length) {\n                form.on('submit', function(e) {\n                    e.preventDefault();\n\n                    // Verificar si el chat está bloqueado\n                    if (isChatBlocked) {\n                        messagesDiv.append('<p><strong>Tutor:</strong> No puedes enviar mensajes mientras estás realizando un cuestionario en curso.</p>');\n                        messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                        return;\n                    }\n\n                    var message = chatInput.val();\n\n                    if (message.trim() === '') {\n                        return;\n                    }\n\n                    messagesDiv.append('<p><strong>Tú:</strong> ' + message + '</p>');\n                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                    chatInput.val('');\n\n                    // Guardar el mensaje del usuario en la API\n                    $.ajax({\n                        url: `${API_BD_TUTOR_BASE}messages/save`, // Usar variable para endpoint POST de mensajes\n                        method: 'POST',\n                        data: JSON.stringify({\n                            user_id: userid,\n                            message_type: 'input',\n                            message_text: message\n                        }),\n                        contentType: 'application/json',\n                        success: function(response) {\n                            console.log('Mensaje del usuario guardado:', response);\n                            messagesDiv.append('<p><strong>Debug:</strong> Mensaje del usuario guardado en la API.</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                        },\n                        error: function(xhr, status, error) {\n                            console.log('Error al guardar mensaje del usuario:', { xhr, status, error });\n                            messagesDiv.append('<p><strong>Debug:</strong> Error al guardar mensaje del usuario: ' + error + '</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                        }\n                    });\n\n                    messagesDiv.append('<p><strong>Debug:</strong> Enviando a la API...</p>');\n                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                    var instruccion = \"Actúa como un profesor especializado en Análisis y Diseño de Software. Responde todas las preguntas relacionadas con el tema de forma clara, detallada y estructurada, utilizando ejemplos prácticos y profundizando en las teorías, principios y metodologías que conforman el área. Tus respuestas deben incluir aspectos tanto teóricos como prácticos, explicando de forma comprensible conceptos como los diagramas UML, las metodologías ágiles, el ciclo de vida del software, los patrones de diseño, la arquitectura de software, la ingeniería de requisitos, y otras áreas clave del análisis y diseño de software. Responde en español de manera técnica, pero accesible para estudiantes. Responde que no puedes ayudar si preguntan algo que no este relacionado al Análisis y Diseño de Software.\";\n\n                    $.ajax({\n                        url: API_tutor, // Usar variable para endpoint de generación\n                        method: 'POST',\n                        data: JSON.stringify({\n                            instruccion: instruccion,\n                            entrada: message,\n                            max_nuevos_tokens: 1000\n                        }),\n                        contentType: 'application/json',\n                        success: function(response) {\n                            var tutorResponse = response.respuesta;\n                            messagesDiv.append('<p><strong>Bot:</strong> ' + tutorResponse + '</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n\n                            // Guardar la respuesta del tutor en la API\n                            $.ajax({\n                                url: `${API_BD_TUTOR_BASE}messages/save`, // Usar variable para endpoint POST de mensajes\n                                method: 'POST',\n                                data: JSON.stringify({\n                                    user_id: userid,\n                                    message_type: 'output',\n                                    message_text: tutorResponse\n                                }),\n                                contentType: 'application/json',\n                                success: function(saveResponse) {\n                                    console.log('Respuesta del tutor guardada:', saveResponse);\n                                    messagesDiv.append('<p><strong>Debug:</strong> Respuesta del tutor guardada en la API.</p>');\n                                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                },\n                                error: function(xhr, status, error) {\n                                    console.log('Error al guardar respuesta del tutor:', { xhr, status, error });\n                                    messagesDiv.append('<p><strong>Debug:</strong> Error al guardar respuesta del tutor: ' + error + '</p>');\n                                    messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                                }\n                            });\n                        },\n                        error: function(xhr, status, error) {\n                            messagesDiv.append('<p><strong>Bot:</strong> Error al conectar con la API: ' + error + '</p>');\n                            messagesDiv.scrollTop(messagesDiv[0].scrollHeight);\n                        }\n                    });\n                });\n            } else {\n                messagesDiv.append('<p><strong>Error:</strong> Formulario no encontrado</p>');\n            }\n        }\n    };\n});"],"names":["define","$","API_tutor","API_BD_TUTOR_BASE","API_Moodle","init","userid","courseid","role","messagesDiv","form","chatInput","submitButton","find","isChatBlocked","verificarIntentosCuestionario","callback","params","wstoken","wsfunction","moodlewsrestformat","queryString","param","fullUrl","console","log","append","scrollTop","scrollHeight","ajax","url","method","dataType","success","data","actividades","usergrades","forEach","user","gradeitems","item","itemname","cmid","push","name","length","quizzes","promises","map","actividad","paramsContext","queryStringContext","fullUrlContext","contextData","cm","modname","quizid","instance","error","xhr","status","Promise","all","then","attemptPromises","quiz","paramsAttempts","includepreviews","queryStringAttempts","fullUrlAttempts","attemptData","attempts","attempt","state","prop","catch","obtenerRecomendaciones","activityId","URLSearchParams","window","location","search","get","notas","grade","graderaw","userfullname","JSON","stringify","instruccion","entrada","max_nuevos_tokens","contentType","response","respuesta","cleanedResponse","replace","trim","recomendaciones","parse","mensaje","rec","nota","recomendacion","parseError","message","responseText","username","userRegisteredKey","localStorage","setItem","user_id","btnIniciarEscaneo","on","e","preventDefault","val","message_type","message_text","tutorResponse","saveResponse"],"mappings":"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"}